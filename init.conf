# Change the default shell to match SHELL variable.
set -g default-shell $SHELL

# Make tmux display things in 256 colors.
set -s default-terminal "screen-256color"

set -g prefix C-a
unbind C-b
# Press C-a key twice to send original prefix
# to the underlying application.
bind C-a send-prefix

# Enable mouse support
set -g mouse on

# Don't wait after press ESC key, eliminate vim mode switching delay.
set -s escape-time 0

# Increase the maximum number of lines held in window history.
set -g history-limit 50000

# Update status line more frequently (every 5 seconds).
set -g status-interval 5

# Use Emacs-style key bindings in status line.
set -g status-keys emacs

# Window index start from 1
set -g base-index 1
# Pane index start from 1
set -g pane-base-index 1

# Monitor for activity in the window. Windows with activity are
# highlighted in the status line.
set -g monitor-activity on
# When activity occurs in a window, display a message
# instead of sending a bell
set -g visual-activity on

# Bind "prefix r" to reload config
bind r source-file "$HOME/.tmux.conf" \; \
           display-message "config reloaded"

# Press \ to split window like '|' (horizontally)
bind \\ split-window -h
# Press - to split window like '-' (vertically)
bind - split-window -v

# Use Vi-style key to switch between panes
bind h select-pane -L
bind l select-pane -R
bind k select-pane -U
bind j select-pane -D

# Bind "prefix C-h/C-l" to select left/right window.
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Use Vi-style key to resize panes
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5
bind -r K resize-pane -U 5
bind -r J resize-pane -D 5

# Use Vi-style key in copy mode
set -g mode-keys vi
# prefix Escape to get into copy mode
bind Escape copy-mode
# p to paste buffer
unbind p
bind p paste-buffer
# P to select and paste buffer
bind P choose-buffer
# v to begin selection in copy mode
bind -T copy-mode-vi v send-keys -X begin-selection
# y to copy/cancel selection in copy mode
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Plugins
set -g @plugin 'tmux-plugins/tpm'

# Theme
set -g @plugin 'dracula/tmux'
set -g @dracula-show-network false
set -g @dracula-show-weather false
set -g @dracula-border-contrast true

# Let copy mode copy content into system clipboard.
# In linux, this need xsel to be installed.
set -g @plugin 'tmux-plugins/tmux-yank'

# Save and restore tmux environment.
# prefix C-s to save.
# prefix C-r to restore.
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Continuous saving of tmux environment,
# automatic restore when tmux is started
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

# Initialize tmux plugin manager (keep this line at the very bottom of
# tmux.conf)
run "$TMUX_CONFIG_DIR/plugins/tpm/tpm"
